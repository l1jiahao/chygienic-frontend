{"remainingRequest":"/home/nogra/WebstormProjects/chygienic-frontend/node_modules/babel-loader/lib/index.js!/home/nogra/WebstormProjects/chygienic-frontend/node_modules/eslint-loader/index.js??ref--14-0!/home/nogra/WebstormProjects/chygienic-frontend/src/core/permission/permission.js","dependencies":[{"path":"/home/nogra/WebstormProjects/chygienic-frontend/src/core/permission/permission.js","mtime":1639697479611},{"path":"/home/nogra/WebstormProjects/chygienic-frontend/babel.config.js","mtime":1639697479604},{"path":"/home/nogra/WebstormProjects/chygienic-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1639555563345},{"path":"/home/nogra/WebstormProjects/chygienic-frontend/node_modules/babel-loader/lib/index.js","mtime":1639555563394},{"path":"/home/nogra/WebstormProjects/chygienic-frontend/node_modules/eslint-loader/index.js","mtime":1639555571657}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL25vZ3JhL1dlYnN0b3JtUHJvamVjdHMvY2h5Z2llbmljLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKZXhwb3J0IHZhciBQRVJNSVNTSU9OX0VOVU0gPSB7CiAgJ2FkZCc6IHsKICAgIGtleTogJ2FkZCcsCiAgICBsYWJlbDogJ+aWsOWinicKICB9LAogICdkZWxldGUnOiB7CiAgICBrZXk6ICdkZWxldGUnLAogICAgbGFiZWw6ICfliKDpmaQnCiAgfSwKICAnZWRpdCc6IHsKICAgIGtleTogJ2VkaXQnLAogICAgbGFiZWw6ICfkv67mlLknCiAgfSwKICAncXVlcnknOiB7CiAgICBrZXk6ICdxdWVyeScsCiAgICBsYWJlbDogJ+afpeivoicKICB9LAogICdnZXQnOiB7CiAgICBrZXk6ICdnZXQnLAogICAgbGFiZWw6ICfor6bmg4UnCiAgfSwKICAnZW5hYmxlJzogewogICAga2V5OiAnZW5hYmxlJywKICAgIGxhYmVsOiAn5ZCv55SoJwogIH0sCiAgJ2Rpc2FibGUnOiB7CiAgICBrZXk6ICdkaXNhYmxlJywKICAgIGxhYmVsOiAn56aB55SoJwogIH0sCiAgJ2ltcG9ydCc6IHsKICAgIGtleTogJ2ltcG9ydCcsCiAgICBsYWJlbDogJ+WvvOWFpScKICB9LAogICdleHBvcnQnOiB7CiAgICBrZXk6ICdleHBvcnQnLAogICAgbGFiZWw6ICflr7zlh7onCiAgfQp9OwovKioKICogPGEtYnV0dG9uIHYtaWY9IiRhdXRoKCdmb3JtLmVkaXQnKSI+QnV0dG9uPC9hLWJ1dHRvbj4KICogQHBhcmFtIFZ1ZQogKi8KCmZ1bmN0aW9uIHBsdWdpbihWdWUpIHsKICBpZiAocGx1Z2luLmluc3RhbGxlZCkgewogICAgcmV0dXJuOwogIH0KCiAgIVZ1ZS5wcm90b3R5cGUuJGF1dGggJiYgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVnVlLnByb3RvdHlwZSwgewogICAgJGF1dGg6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwZXJtaXNzaW9ucykgewogICAgICAgICAgdmFyIF9wZXJtaXNzaW9ucyRzcGxpdCA9IHBlcm1pc3Npb25zLnNwbGl0KCcuJyksCiAgICAgICAgICAgICAgX3Blcm1pc3Npb25zJHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF9wZXJtaXNzaW9ucyRzcGxpdCwgMiksCiAgICAgICAgICAgICAgcGVybWlzc2lvbiA9IF9wZXJtaXNzaW9ucyRzcGxpdDJbMF0sCiAgICAgICAgICAgICAgYWN0aW9uID0gX3Blcm1pc3Npb25zJHNwbGl0MlsxXTsKCiAgICAgICAgICB2YXIgcGVybWlzc2lvbkxpc3QgPSBfdGhpcy4kc3RvcmUuZ2V0dGVycy5yb2xlcy5wZXJtaXNzaW9uczsKICAgICAgICAgIHJldHVybiBwZXJtaXNzaW9uTGlzdC5maW5kKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgcmV0dXJuIHZhbC5wZXJtaXNzaW9uSWQgPT09IHBlcm1pc3Npb247CiAgICAgICAgICB9KS5hY3Rpb25MaXN0LmZpbmRJbmRleChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIHJldHVybiB2YWwgPT09IGFjdGlvbjsKICAgICAgICAgIH0pID4gLTE7CiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0pOwogICFWdWUucHJvdG90eXBlLiRlbnVtICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFZ1ZS5wcm90b3R5cGUsIHsKICAgICRlbnVtOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIC8vIGNvbnN0IF90aGlzID0gdGhpczsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgdmFyIHJlc3VsdCA9IFBFUk1JU1NJT05fRU5VTTsKICAgICAgICAgIHZhbCAmJiB2YWwuc3BsaXQoJy4nKS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCAmJiByZXN1bHRbdl0gfHwgbnVsbDsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgfSk7Cn0KCmV4cG9ydCBkZWZhdWx0IHBsdWdpbjs="},{"version":3,"sources":["/home/nogra/WebstormProjects/chygienic-frontend/src/core/permission/permission.js"],"names":["PERMISSION_ENUM","key","label","plugin","Vue","installed","prototype","$auth","Object","defineProperties","get","_this","permissions","split","permission","action","permissionList","$store","getters","roles","find","val","permissionId","actionList","findIndex","$enum","result","forEach","v"],"mappings":";;;;;;;AAAA,OAAO,IAAMA,eAAe,GAAG;AAC7B,SAAO;AAAEC,IAAAA,GAAG,EAAE,KAAP;AAAcC,IAAAA,KAAK,EAAE;AAArB,GADsB;AAE7B,YAAU;AAAED,IAAAA,GAAG,EAAE,QAAP;AAAiBC,IAAAA,KAAK,EAAE;AAAxB,GAFmB;AAG7B,UAAQ;AAAED,IAAAA,GAAG,EAAE,MAAP;AAAeC,IAAAA,KAAK,EAAE;AAAtB,GAHqB;AAI7B,WAAS;AAAED,IAAAA,GAAG,EAAE,OAAP;AAAgBC,IAAAA,KAAK,EAAE;AAAvB,GAJoB;AAK7B,SAAO;AAAED,IAAAA,GAAG,EAAE,KAAP;AAAcC,IAAAA,KAAK,EAAE;AAArB,GALsB;AAM7B,YAAU;AAAED,IAAAA,GAAG,EAAE,QAAP;AAAiBC,IAAAA,KAAK,EAAE;AAAxB,GANmB;AAO7B,aAAW;AAAED,IAAAA,GAAG,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GAPkB;AAQ7B,YAAU;AAAED,IAAAA,GAAG,EAAE,QAAP;AAAiBC,IAAAA,KAAK,EAAE;AAAxB,GARmB;AAS7B,YAAU;AAAED,IAAAA,GAAG,EAAE,QAAP;AAAiBC,IAAAA,KAAK,EAAE;AAAxB;AATmB,CAAxB;AAYP;AACA;AACA;AACA;;AACA,SAASC,MAAT,CAAiBC,GAAjB,EAAsB;AACpB,MAAID,MAAM,CAACE,SAAX,EAAsB;AACpB;AACD;;AAED,GAACD,GAAG,CAACE,SAAJ,CAAcC,KAAf,IAAwBC,MAAM,CAACC,gBAAP,CAAwBL,GAAG,CAACE,SAA5B,EAAuC;AAC7DC,IAAAA,KAAK,EAAE;AACLG,MAAAA,GADK,iBACE;AACL,YAAMC,KAAK,GAAG,IAAd;;AACA,eAAO,UAACC,WAAD,EAAiB;AACtB,mCAA6BA,WAAW,CAACC,KAAZ,CAAkB,GAAlB,CAA7B;AAAA;AAAA,cAAOC,UAAP;AAAA,cAAmBC,MAAnB;;AACA,cAAMC,cAAc,GAAGL,KAAK,CAACM,MAAN,CAAaC,OAAb,CAAqBC,KAArB,CAA2BP,WAAlD;AACA,iBAAOI,cAAc,CAACI,IAAf,CAAoB,UAACC,GAAD,EAAS;AAClC,mBAAOA,GAAG,CAACC,YAAJ,KAAqBR,UAA5B;AACD,WAFM,EAEJS,UAFI,CAEOC,SAFP,CAEiB,UAACH,GAAD,EAAS;AAC/B,mBAAOA,GAAG,KAAKN,MAAf;AACD,WAJM,IAIF,CAAC,CAJN;AAKD,SARD;AASD;AAZI;AADsD,GAAvC,CAAxB;AAiBA,GAACX,GAAG,CAACE,SAAJ,CAAcmB,KAAf,IAAwBjB,MAAM,CAACC,gBAAP,CAAwBL,GAAG,CAACE,SAA5B,EAAuC;AAC7DmB,IAAAA,KAAK,EAAE;AACLf,MAAAA,GADK,iBACE;AACL;AACA,eAAO,UAACW,GAAD,EAAS;AACd,cAAIK,MAAM,GAAG1B,eAAb;AACAqB,UAAAA,GAAG,IAAIA,GAAG,CAACR,KAAJ,CAAU,GAAV,EAAec,OAAf,CAAuB,UAAAC,CAAC,EAAI;AACjCF,YAAAA,MAAM,GAAGA,MAAM,IAAIA,MAAM,CAACE,CAAD,CAAhB,IAAuB,IAAhC;AACD,WAFM,CAAP;AAGA,iBAAOF,MAAP;AACD,SAND;AAOD;AAVI;AADsD,GAAvC,CAAxB;AAcD;;AAED,eAAevB,MAAf","sourcesContent":["export const PERMISSION_ENUM = {\n  'add': { key: 'add', label: '新增' },\n  'delete': { key: 'delete', label: '删除' },\n  'edit': { key: 'edit', label: '修改' },\n  'query': { key: 'query', label: '查询' },\n  'get': { key: 'get', label: '详情' },\n  'enable': { key: 'enable', label: '启用' },\n  'disable': { key: 'disable', label: '禁用' },\n  'import': { key: 'import', label: '导入' },\n  'export': { key: 'export', label: '导出' }\n}\n\n/**\n * <a-button v-if=\"$auth('form.edit')\">Button</a-button>\n * @param Vue\n */\nfunction plugin (Vue) {\n  if (plugin.installed) {\n    return\n  }\n\n  !Vue.prototype.$auth && Object.defineProperties(Vue.prototype, {\n    $auth: {\n      get () {\n        const _this = this\n        return (permissions) => {\n          const [permission, action] = permissions.split('.')\n          const permissionList = _this.$store.getters.roles.permissions\n          return permissionList.find((val) => {\n            return val.permissionId === permission\n          }).actionList.findIndex((val) => {\n            return val === action\n          }) > -1\n        }\n      }\n    }\n  })\n\n  !Vue.prototype.$enum && Object.defineProperties(Vue.prototype, {\n    $enum: {\n      get () {\n        // const _this = this;\n        return (val) => {\n          let result = PERMISSION_ENUM\n          val && val.split('.').forEach(v => {\n            result = result && result[v] || null\n          })\n          return result\n        }\n      }\n    }\n  })\n}\n\nexport default plugin\n"]}]}