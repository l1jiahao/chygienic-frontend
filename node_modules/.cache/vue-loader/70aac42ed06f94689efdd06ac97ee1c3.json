{"remainingRequest":"/home/nogra/WebstormProjects/chygienic-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nogra/WebstormProjects/chygienic-frontend/src/views/list/table/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nogra/WebstormProjects/chygienic-frontend/src/views/list/table/List.vue","mtime":1639697479618},{"path":"/home/nogra/WebstormProjects/chygienic-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1639555563345},{"path":"/home/nogra/WebstormProjects/chygienic-frontend/node_modules/babel-loader/lib/index.js","mtime":1639555563394},{"path":"/home/nogra/WebstormProjects/chygienic-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1639555563345},{"path":"/home/nogra/WebstormProjects/chygienic-frontend/node_modules/vue-loader/lib/index.js","mtime":1639555573442}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JwppbXBvcnQgeyBTVGFibGUgfSBmcm9tICdAL2NvbXBvbmVudHMnCmltcG9ydCB7IGdldFJvbGVMaXN0LCBnZXRTZXJ2aWNlTGlzdCB9IGZyb20gJ0AvYXBpL21hbmFnZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVGFibGVMaXN0JywKICBjb21wb25lbnRzOiB7CiAgICBTVGFibGUKICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgbWRsOiB7fSwKICAgICAgLy8g6auY57qn5pCc57SiIOWxleW8gC/lhbPpl60KICAgICAgYWR2YW5jZWQ6IGZhbHNlLAogICAgICAvLyDmn6Xor6Llj4LmlbAKICAgICAgcXVlcnlQYXJhbToge30sCiAgICAgIC8vIOihqOWktAogICAgICBjb2x1bW5zOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICcjJywKICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ3NlcmlhbCcgfQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfop4TliJnnvJblj7cnLAogICAgICAgICAgZGF0YUluZGV4OiAnbm8nCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+aPj+i/sCcsCiAgICAgICAgICBkYXRhSW5kZXg6ICdkZXNjcmlwdGlvbicKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5pyN5Yqh6LCD55So5qyh5pWwJywKICAgICAgICAgIGRhdGFJbmRleDogJ2NhbGxObycsCiAgICAgICAgICBzb3J0ZXI6IHRydWUsCiAgICAgICAgICBuZWVkVG90YWw6IHRydWUsCiAgICAgICAgICBjdXN0b21SZW5kZXI6ICh0ZXh0KSA9PiB0ZXh0ICsgJyDmrKEnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+eKtuaAgScsCiAgICAgICAgICBkYXRhSW5kZXg6ICdzdGF0dXMnLAogICAgICAgICAgbmVlZFRvdGFsOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+abtOaWsOaXtumXtCcsCiAgICAgICAgICBkYXRhSW5kZXg6ICd1cGRhdGVkQXQnLAogICAgICAgICAgc29ydGVyOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+aTjeS9nCcsCiAgICAgICAgICBkYXRhSW5kZXg6ICdhY3Rpb24nLAogICAgICAgICAgd2lkdGg6ICcxNTBweCcsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdhY3Rpb24nIH0KICAgICAgICB9CiAgICAgIF0sCiAgICAgIC8vIOWKoOi9veaVsOaNruaWueazlSDlv4XpobvkuLogUHJvbWlzZSDlr7nosaEKICAgICAgbG9hZERhdGE6IHBhcmFtZXRlciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ2xvYWREYXRhLnBhcmFtZXRlcicsIHBhcmFtZXRlcikKICAgICAgICByZXR1cm4gZ2V0U2VydmljZUxpc3QoT2JqZWN0LmFzc2lnbihwYXJhbWV0ZXIsIHRoaXMucXVlcnlQYXJhbSkpCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICByZXR1cm4gcmVzLnJlc3VsdAogICAgICAgICAgfSkKICAgICAgfSwKICAgICAgc2VsZWN0ZWRSb3dLZXlzOiBbXSwKICAgICAgc2VsZWN0ZWRSb3dzOiBbXSwKCiAgICAgIC8vIGN1c3RvbSB0YWJsZSBhbGVydCAmIHJvd1NlbGVjdGlvbgogICAgICBvcHRpb25zOiB7CiAgICAgICAgYWxlcnQ6IHsgc2hvdzogdHJ1ZSwgY2xlYXI6ICgpID0+IHsgdGhpcy5zZWxlY3RlZFJvd0tleXMgPSBbXSB9IH0sCiAgICAgICAgcm93U2VsZWN0aW9uOiB7CiAgICAgICAgICBzZWxlY3RlZFJvd0tleXM6IHRoaXMuc2VsZWN0ZWRSb3dLZXlzLAogICAgICAgICAgb25DaGFuZ2U6IHRoaXMub25TZWxlY3RDaGFuZ2UKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG9wdGlvbkFsZXJ0U2hvdzogZmFsc2UKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy50YWJsZU9wdGlvbigpCiAgICBnZXRSb2xlTGlzdCh7IHQ6IG5ldyBEYXRlKCkgfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIHRhYmxlT3B0aW9uICgpIHsKICAgICAgaWYgKCF0aGlzLm9wdGlvbkFsZXJ0U2hvdykgewogICAgICAgIHRoaXMub3B0aW9ucyA9IHsKICAgICAgICAgIGFsZXJ0OiB7IHNob3c6IHRydWUsIGNsZWFyOiAoKSA9PiB7IHRoaXMuc2VsZWN0ZWRSb3dLZXlzID0gW10gfSB9LAogICAgICAgICAgcm93U2VsZWN0aW9uOiB7CiAgICAgICAgICAgIHNlbGVjdGVkUm93S2V5czogdGhpcy5zZWxlY3RlZFJvd0tleXMsCiAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uU2VsZWN0Q2hhbmdlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMub3B0aW9uQWxlcnRTaG93ID0gdHJ1ZQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMub3B0aW9ucyA9IHsKICAgICAgICAgIGFsZXJ0OiBmYWxzZSwKICAgICAgICAgIHJvd1NlbGVjdGlvbjogbnVsbAogICAgICAgIH0KICAgICAgICB0aGlzLm9wdGlvbkFsZXJ0U2hvdyA9IGZhbHNlCiAgICAgIH0KICAgIH0sCgogICAgaGFuZGxlRWRpdCAocmVjb3JkKSB7CiAgICAgIHRoaXMuJGVtaXQoJ29uRWRpdCcsIHJlY29yZCkKICAgIH0sCiAgICBoYW5kbGVPayAoKSB7CgogICAgfSwKCiAgICBvblNlbGVjdENoYW5nZSAoc2VsZWN0ZWRSb3dLZXlzLCBzZWxlY3RlZFJvd3MpIHsKICAgICAgdGhpcy5zZWxlY3RlZFJvd0tleXMgPSBzZWxlY3RlZFJvd0tleXMKICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBzZWxlY3RlZFJvd3MKICAgIH0sCiAgICB0b2dnbGVBZHZhbmNlZCAoKSB7CiAgICAgIHRoaXMuYWR2YW5jZWQgPSAhdGhpcy5hZHZhbmNlZAogICAgfSwKCiAgICByZXNldFNlYXJjaEZvcm0gKCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW0gPSB7CiAgICAgICAgZGF0ZTogbW9tZW50KG5ldyBEYXRlKCkpCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views/list/table","sourcesContent":["<template>\n  <div>\n    <div class=\"table-page-search-wrapper\">\n      <a-form layout=\"inline\">\n        <a-row :gutter=\"48\">\n          <a-col :md=\"8\" :sm=\"24\">\n            <a-form-item label=\"规则编号\">\n              <a-input v-model=\"queryParam.id\" placeholder=\"\"/>\n            </a-form-item>\n          </a-col>\n          <a-col :md=\"8\" :sm=\"24\">\n            <a-form-item label=\"使用状态\">\n              <a-select v-model=\"queryParam.status\" placeholder=\"请选择\" default-value=\"0\">\n                <a-select-option value=\"0\">全部</a-select-option>\n                <a-select-option value=\"1\">关闭</a-select-option>\n                <a-select-option value=\"2\">运行中</a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n          <template v-if=\"advanced\">\n            <a-col :md=\"8\" :sm=\"24\">\n              <a-form-item label=\"调用次数\">\n                <a-input-number v-model=\"queryParam.callNo\" style=\"width: 100%\"/>\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"8\" :sm=\"24\">\n              <a-form-item label=\"更新日期\">\n                <a-date-picker v-model=\"queryParam.date\" style=\"width: 100%\" placeholder=\"请输入更新日期\"/>\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"8\" :sm=\"24\">\n              <a-form-item label=\"使用状态\">\n                <a-select v-model=\"queryParam.useStatus\" placeholder=\"请选择\" default-value=\"0\">\n                  <a-select-option value=\"0\">全部</a-select-option>\n                  <a-select-option value=\"1\">关闭</a-select-option>\n                  <a-select-option value=\"2\">运行中</a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"8\" :sm=\"24\">\n              <a-form-item label=\"使用状态\">\n                <a-select placeholder=\"请选择\" default-value=\"0\">\n                  <a-select-option value=\"0\">全部</a-select-option>\n                  <a-select-option value=\"1\">关闭</a-select-option>\n                  <a-select-option value=\"2\">运行中</a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n          </template>\n          <a-col :md=\"!advanced && 8 || 24\" :sm=\"24\">\n            <span class=\"table-page-search-submitButtons\" :style=\"advanced && { float: 'right', overflow: 'hidden' } || {} \">\n              <a-button type=\"primary\" @click=\"$refs.table.refresh(true)\">查询</a-button>\n              <a-button style=\"margin-left: 8px\" @click=\"() => queryParam = {}\">重置</a-button>\n              <a @click=\"toggleAdvanced\" style=\"margin-left: 8px\">\n                {{ advanced ? '收起' : '展开' }}\n                <a-icon :type=\"advanced ? 'up' : 'down'\"/>\n              </a>\n            </span>\n          </a-col>\n        </a-row>\n      </a-form>\n    </div>\n\n    <div class=\"table-operator\">\n      <a-button type=\"primary\" icon=\"plus\" @click=\"handleEdit()\">新建</a-button>\n      <a-button type=\"dashed\" @click=\"tableOption\">{{ optionAlertShow && '关闭' || '开启' }} alert</a-button>\n      <a-dropdown v-action:edit v-if=\"selectedRowKeys.length > 0\">\n        <a-menu slot=\"overlay\">\n          <a-menu-item key=\"1\"><a-icon type=\"delete\" />删除</a-menu-item>\n          <!-- lock | unlock -->\n          <a-menu-item key=\"2\"><a-icon type=\"lock\" />锁定</a-menu-item>\n        </a-menu>\n        <a-button style=\"margin-left: 8px\">\n          批量操作 <a-icon type=\"down\" />\n        </a-button>\n      </a-dropdown>\n    </div>\n\n    <s-table\n      ref=\"table\"\n      size=\"default\"\n      rowKey=\"key\"\n      :columns=\"columns\"\n      :data=\"loadData\"\n      :alert=\"options.alert\"\n      :rowSelection=\"options.rowSelection\"\n    >\n      <span slot=\"serial\" slot-scope=\"text, record, index\">\n        {{ index + 1 }}\n      </span>\n      <span slot=\"action\" slot-scope=\"text, record\">\n        <template>\n          <a @click=\"handleEdit(record)\">编辑</a>\n          <a-divider type=\"vertical\" />\n        </template>\n        <a-dropdown>\n          <a class=\"ant-dropdown-link\">\n            更多 <a-icon type=\"down\" />\n          </a>\n          <a-menu slot=\"overlay\">\n            <a-menu-item>\n              <a href=\"javascript:;\">详情</a>\n            </a-menu-item>\n            <a-menu-item v-if=\"$auth('table.disable')\">\n              <a href=\"javascript:;\">禁用</a>\n            </a-menu-item>\n            <a-menu-item v-if=\"$auth('table.delete')\">\n              <a href=\"javascript:;\">删除</a>\n            </a-menu-item>\n          </a-menu>\n        </a-dropdown>\n      </span>\n    </s-table>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment'\nimport { STable } from '@/components'\nimport { getRoleList, getServiceList } from '@/api/manage'\n\nexport default {\n  name: 'TableList',\n  components: {\n    STable\n  },\n  data () {\n    return {\n      mdl: {},\n      // 高级搜索 展开/关闭\n      advanced: false,\n      // 查询参数\n      queryParam: {},\n      // 表头\n      columns: [\n        {\n          title: '#',\n          scopedSlots: { customRender: 'serial' }\n        },\n        {\n          title: '规则编号',\n          dataIndex: 'no'\n        },\n        {\n          title: '描述',\n          dataIndex: 'description'\n        },\n        {\n          title: '服务调用次数',\n          dataIndex: 'callNo',\n          sorter: true,\n          needTotal: true,\n          customRender: (text) => text + ' 次'\n        },\n        {\n          title: '状态',\n          dataIndex: 'status',\n          needTotal: true\n        },\n        {\n          title: '更新时间',\n          dataIndex: 'updatedAt',\n          sorter: true\n        },\n        {\n          title: '操作',\n          dataIndex: 'action',\n          width: '150px',\n          scopedSlots: { customRender: 'action' }\n        }\n      ],\n      // 加载数据方法 必须为 Promise 对象\n      loadData: parameter => {\n        console.log('loadData.parameter', parameter)\n        return getServiceList(Object.assign(parameter, this.queryParam))\n          .then(res => {\n            return res.result\n          })\n      },\n      selectedRowKeys: [],\n      selectedRows: [],\n\n      // custom table alert & rowSelection\n      options: {\n        alert: { show: true, clear: () => { this.selectedRowKeys = [] } },\n        rowSelection: {\n          selectedRowKeys: this.selectedRowKeys,\n          onChange: this.onSelectChange\n        }\n      },\n      optionAlertShow: false\n    }\n  },\n  created () {\n    this.tableOption()\n    getRoleList({ t: new Date() })\n  },\n  methods: {\n    tableOption () {\n      if (!this.optionAlertShow) {\n        this.options = {\n          alert: { show: true, clear: () => { this.selectedRowKeys = [] } },\n          rowSelection: {\n            selectedRowKeys: this.selectedRowKeys,\n            onChange: this.onSelectChange\n          }\n        }\n        this.optionAlertShow = true\n      } else {\n        this.options = {\n          alert: false,\n          rowSelection: null\n        }\n        this.optionAlertShow = false\n      }\n    },\n\n    handleEdit (record) {\n      this.$emit('onEdit', record)\n    },\n    handleOk () {\n\n    },\n\n    onSelectChange (selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys\n      this.selectedRows = selectedRows\n    },\n    toggleAdvanced () {\n      this.advanced = !this.advanced\n    },\n\n    resetSearchForm () {\n      this.queryParam = {\n        date: moment(new Date())\n      }\n    }\n  }\n}\n</script>\n"]}]}